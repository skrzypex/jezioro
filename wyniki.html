<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Wyniki Hall Of Fame</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
<style>
body {
  margin: 0;
  padding: 20px;
  font-family: 'Playfair Display', serif;
  background: radial-gradient(circle at top,#1a1a1a,#000);
  color: #fff;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
}
h1 { font-size: 48px; letter-spacing:3px; text-align:center; margin-bottom:30px; }
.category {
  background: rgba(255,255,255,0.05);
  padding: 15px 20px;
  border-radius: 15px;
  margin-bottom: 20px;
  width: 100%;
  max-width: 600px;
  transition: transform 0.3s;
}
.category:hover { transform: scale(1.03); }
.category h2 { color:#d4af37; margin-bottom:10px; }
.category p { margin:5px 0; }
.button-group {
  display: flex;
  gap: 20px;
  margin-top: 30px;
}
.btn {
  padding: 14px 36px;
  border-radius: 30px;
  cursor: pointer;
  text-decoration: none;
  background: linear-gradient(135deg,#d4af37,#f5e28c);
  color: #000;
}
.btn:hover { transform: scale(1.05); }
</style>
</head>
<body>

<h1>Wyniki Hall Of Fame: Jezioro</h1>

<div id="results"></div>

<div class="button-group">
  <a href="index.html" class="btn">Powrót na stronę główną</a>
</div>

<script>
async function loadResults() {
  try {
    const res = await fetch('/api/vote');
    const data = await res.json();

    const container = document.getElementById('results');

    // lista kategorii w odpowiedniej kolejności
    const categories = [
      'I','II','III','IV','V','VI','VII','VIII','IX','X','XI','XII','XIII'
    ];

    categories.forEach(cat => {
      const participants = data[cat] ? Object.entries(data[cat])
        .sort((a,b)=>b[1]-a[1])
        .slice(0,3) : [];

      const div = document.createElement('div');
      div.className = 'category';
      div.innerHTML = `<h2>Kategoria ${cat}</h2>` +
        participants.map(([name,votes],i)=>`<p>${i+1}. ${name} – ${votes} głosów</p>`).join('');
      container.appendChild(div);
    });

  } catch(err) {
    console.error(err);
  }
}

window.onload = loadResults;
</script>

</body>
</html>
